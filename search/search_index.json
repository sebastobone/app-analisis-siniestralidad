{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introducci\u00f3n","text":"<p>El an\u00e1lisis de siniestralidad para el cierre de reservas es un proceso realizado cada mes por cada negocio de la compa\u00f1\u00eda (Salud, ARL, Autonom\u00eda, SOAT, Movilidad, EPS, Competitividad) a trav\u00e9s de los equipos de Gesti\u00f3n T\u00e9cnica. Este proceso tiene como objetivo calcular la siniestralidad \u00faltima esperada en t\u00e9rminos de los pagos futuros. Para ello, toma como insumo principal la informaci\u00f3n hist\u00f3rica de pagos, avisos, primas y expuestos almacenada en las bases de datos de la compa\u00f1\u00eda, espec\u00edficamente en Teradata.</p> <p>Para llevar a cabo este an\u00e1lisis, se utiliza principalmente la t\u00e9cnica de desarrollo de tri\u00e1ngulos conocida como el m\u00e9todo Chain Ladder. Este enfoque permite a los equipos t\u00e9cnicos proyectar los pagos futuros y evaluar la evoluci\u00f3n de la siniestralidad, proporcionando una base s\u00f3lida para la toma de decisiones en la gesti\u00f3n de riesgos y siniestralidad.</p> <p>En esta documentaci\u00f3n se describen la forma, el m\u00e9todo y los pasos a seguir para llevar a cabo el proceso de seguimiento de siniestralidad que realiza cada negocio de manera peri\u00f3dica a trav\u00e9s de una aplicaci\u00f3n de Python.</p> <p>Adicionalmente, el alcance la herramienta aqu\u00ed descrita no est\u00e1 limitado al c\u00e1lculo de los cierres mensuales, sino que est\u00e1 dise\u00f1ada para realizar todo tipo de an\u00e1lisis de siniestralidad por medio de la metodolog\u00eda Chain-Ladder.</p>"},{"location":"diccionario/","title":"Diccionario","text":"<ul> <li>Pago: Monto pagado por siniestros.</li> <li>Aviso: Provisiones para pagar siniestros conocidos.</li> <li>IBNR: Provisiones para pagar siniestros no conocidos o no suficientemente conocidos.</li> <li>Incurrido: Suma de pago y aviso, monto completo de siniestros conocidos.</li> <li>Ocurrencia: Periodo de tiempo en espec\u00edfico. Este se compone por el a\u00f1o y el n\u00famero del mes en caso de ser una ocurrencia mensual o el n\u00famero del trimestre en caso de ser trimestral (01, 02, 03, 04) o el n\u00famero del semestre en caso de ser semestral (01 y 02) (Ej. 201906 para referirse al mes 06 del a\u00f1o 2019).</li> <li>Ultimate: Cantidad de dinero que se espera pagar por todos los siniestros ocurridos en un periodo de tiempo espec\u00edfico sin importar en qu\u00e9 momento se tenga el aviso y el pago de estos siniestros. Suma de pago, aviso, e IBNR.</li> <li>Expuestos: Cantidad de personas susceptibles a siniestrarse en un periodo de tiempo espec\u00edfico.</li> </ul>"},{"location":"estructura/","title":"Estructura","text":""},{"location":"estructura/#estructura-del-proyecto","title":"Estructura del proyecto","text":"<p>Al instalar la aplicaci\u00f3n, dentro de la carpeta principal encontrar\u00e1 una estructura de carpetas y archivos. Las rutas y archivos relevantes para el an\u00e1lisis se describen a continuaci\u00f3n.</p> <ul> <li> <p> <code>data/</code></p> <ul> <li> <code>afo/</code>: Almacena los archivos de Excel con conexi\u00f3n a SAP por medio del complemento Analysis for Office (AFO).</li> <li> <code>catalogos/</code>: Almacena resultado de queries auxiliares para el proceso del negocio de autonom\u00eda.</li> <li> <code>controles_informacion/</code>: Almacena los controles de informaci\u00f3n y las evidencias correspondientes generadas.<ul> <li> <code>pre_cuadre_contable/</code>: Almacena los controles de la informaci\u00f3n tal cual como sale de Teradata.</li> <li> <code>post_cuadre_contable/</code>: Almacena los controles de la informaci\u00f3n despu\u00e9s de realizar el proceso del cuadre contable. Si se decide no hacerlo, esta carpeta quedar\u00e1 vac\u00eda.</li> <li> <code>post_ajustes_fraude/</code>: Almacena los controles de la informaci\u00f3n despu\u00e9s de realizar el proceso de limpieza de fraude (s\u00f3lo aplica para SOAT).</li> </ul> </li> <li> <code>db/</code>: Almacena las f\u00f3rmulas y valores de los an\u00e1lisis realizados en las plantillas de Excel.</li> <li> <code>processed/</code>: Almacena las bases de datos que utiliza la plantilla internamente para construir los tri\u00e1ngulos y las hojas de las plantillas de Excel.</li> <li> <code>queries/</code>: Almacena los queries de siniestros, primas, y expuestos para cada negocio.</li> <li> <code>raw/</code>: Almacena la informaci\u00f3n que sale de los queries de siniestros, primas, y expuestos; as\u00ed como esta misma informaci\u00f3n despu\u00e9s de realizar procesos de cuadre contable.</li> <li> <code>segmentacion_{negocio}/</code>: Solamente debe modificar el de su negocio. Define las aperturas del an\u00e1lisis, as\u00ed como las aperturas donde se van a asignar las diferencias contables.</li> </ul> </li> <li> <p> <code>docs/</code>: Almacena la documentaci\u00f3n del proyecto. No se necesita para el an\u00e1lisis.</p> </li> <li> <code>logs/</code>: Almacena los \"logs\" que se van generando a medida que el usuario ejecuta el proceso (fecha y hora de los eventos, registro de errores y avance de procesos). Es la misma informaci\u00f3n que se reporta en la secci\u00f3n \"Estado\" del frontend de la aplicaci\u00f3n.</li> <li> <code>output/</code>: Almacena los resultados de los an\u00e1lisis de siniestralidad hist\u00f3ricos.<ul> <li> <code>resultados/</code>: Almacena los resultados del an\u00e1lisis de siniestralidad obtenidos con cada una de las plantillas, en cada una de las fechas de corte.</li> </ul> </li> <li> <code>plantillas/</code>: Almacena las plantillas usadas para el an\u00e1lisis.</li> <li> <code>src/</code>: Almacena todo el c\u00f3digo de la aplicaci\u00f3n.</li> <li> <code>tests/</code>: Almacena los c\u00f3digos que realizan los testeos autom\u00e1ticos de la aplicaci\u00f3n.</li> <li> <code>.env.private</code>: Almacena las credenciales de Teradata del usuario.</li> <li> <code>.env.public</code>: Almacena la direcci\u00f3n para conectarse a Teradata remotamente.</li> <li> <code>pyproject.toml</code>: Especifica las versiones de los paquetes necesarias para instalar la aplicaci\u00f3n.</li> <li> <code>uv.lock</code>: Especifica las versiones de los paquetes necesarias para instalar la aplicaci\u00f3n.</li> <li> <code>.python-version</code>: Especifica la versi\u00f3n de Python para instalar la aplicaci\u00f3n.</li> <li> <code>run.py</code>: C\u00f3digo que ejecuta la aplicaci\u00f3n.</li> </ul> <p>El resto de los archivos son de configuraci\u00f3n del desarrollo de la aplicaci\u00f3n, y por lo tanto, no son necesarios para el an\u00e1lisis.</p>"},{"location":"instalacion/","title":"Instalaci\u00f3n","text":""},{"location":"instalacion/#instalacion","title":"Instalaci\u00f3n","text":""},{"location":"instalacion/#prerrequisitos","title":"Prerrequisitos","text":"<p>Para instalar la aplicaci\u00f3n y empezarla a usar en un nuevo an\u00e1lisis, debe tener instalado previamente en su equipo Git, uv, y Excel.</p>"},{"location":"instalacion/#instrucciones","title":"Instrucciones","text":"<ol> <li>Entre a la carpeta donde va a almacenar el an\u00e1lisis.</li> <li>Abra una terminal en esta carpeta. Para ello, seleccione la carpeta, presione click derecho, y seleccione abrir nueva terminal.</li> <li> <p>En la terminal, copie lo siguiente y presione enter:</p> <pre><code>git clone https://github.com/sebastobone/app-analisis-siniestralidad.git\ncd app-analisis-siniestralidad\nuv sync --no-dev\n</code></pre> </li> </ol> <p>Para hacer la extraccion de queries, se crear\u00e1 un archivo para almacenar sus credenciales de Teradata. Pegue lo siguiente en la terminal:</p> WindowsMacOS <pre><code>Set-Content -Path \".\\.env.private\" -Value 'TERADATA_USER=\"___\"' -NoNewLine\nAdd-Content -Path \".\\.env.private\" -Value \"`nTERADATA_PASSWORD=\"\"___\"\"\"\n</code></pre> <pre><code>echo 'TERADATA_USER=\"___\"' &gt; .env.private\necho 'TERADATA_PASSWORD=\"___\"' &gt;&gt; .env.private\n</code></pre> <p>Este archivo queda almacenado dentro de la carpeta principal. Si necesita editarlo, puede abrirlo en el bloc de notas.</p> <p>\u00a1Eso es todo! Ahora puede proceder con la configuraci\u00f3n del an\u00e1lisis. No cierre la terminal, la usar\u00e1 para ejecutar el proceso despu\u00e9s.</p>"},{"location":"config/aperturas/","title":"Definici\u00f3n de aperturas","text":"<p>A la hora de realizar un an\u00e1lisis de siniestralidad, es necesario definir un nivel de desagregaci\u00f3n del producto a analizar. A modo de ejemplo, para analizar la siniestralidad de un seguro de salud, una decisi\u00f3n viable ser\u00eda analizar cada cobertura por separado: laboratorios cl\u00ednicos, ex\u00e1menes diagn\u00f3sticos, procedimientos quir\u00fargicos, etc. La l\u00f3gica de segmentaci\u00f3n depende de las necesidades de cada negocio y el entendimiento particular del riesgo al que est\u00e1 expuesto.</p> <p>En las tablas de los modelos de datos de la compa\u00f1\u00eda, se cuenta con informaci\u00f3n de los productos y coberturas tal cual como se encuentran consignados en los clausulados y las notas t\u00e9cnicas de los seguros, as\u00ed como la lista completa de canales, ramos, regionales, sucursales, etc. Si se va a realizar un an\u00e1lisis a nivel de cobertura, puede que el inter\u00e9s no sea estudiar cada una de las coberturas del clausulado, sino que exista la posibilidad de realizar agrupaciones que simplifiquen el an\u00e1lisis o re\u00fanan comportamientos similares del riesgo. Estas agrupaciones son denominadas aperturas.</p> <p>Las aperturas esperadas deben estar almacenadas en el archivo <code>data/segmentacion.xlsx</code>, en las hojas definidas como \"Apertura_Siniestros\", \"Apertura_Primas\", y \"Apertura_Expuestos\". Estas aperturas deben contener todas las aperturas que salen de los queries, pero no es necesario que las aperturas que salen de los queries contengan todas las aperturas que est\u00e1n en estas tablas. Por ejemplo, si en un rango de fechas en el que se va a hacer el an\u00e1lisis una de las aperturas no estaba a la venta, es posible que quede en la tabla pero no en la salida del query.</p> <p>Adicionalmente, en la tabla \"Apertura_Siniestros\" se deben llenar dos columnas adicionales:</p> <ul> <li>apertura_reservas: Representa la llave \u00fanica que identifica cada apertura, se debe construir como el concatenado de las dem\u00e1s columnas.</li> <li>periodicidad_ocurrencia: Representa la granularidad del tri\u00e1ngulo y del entrem\u00e9s que se va a realizar para cada apertura. Puede tomar cuatro valores de periodicidad - Mensual, Trimestral, Semestral, o Anual.</li> </ul> <p>Todas las tablas definidas en estas hojas de apertura deben contener las columnas codigo_op (c\u00f3digo de la compa\u00f1\u00eda) y codigo_ramo_op (c\u00f3digo del ramo).</p> <p>A modo de ejemplo, consulte el archivo <code>data/segmentacion_demo.xlsx</code>.</p> <p>Se tienen dos alternativas para implementar en los queries las aperturas definidas, presentadas a continuaci\u00f3n.</p>"},{"location":"config/aperturas/#definicion-desde-el-query","title":"Definici\u00f3n desde el query","text":"<p>Este camino se recomienda si la apertura es sencilla y no depende de otras aperturas. Por ejemplo:</p> <pre><code>CASE\n    WHEN fas.clase_tarifa_cd IN (2, 3) THEN 'MOTOS'\n    WHEN fas.clase_tarifa_cd IN (4, 5, 6) THEN 'UTILITARIOS'\n    ELSE 'LIVIANOS'\nEND AS tipo_vehiculo_desc\n</code></pre>"},{"location":"config/aperturas/#definicion-desde-el-archivo-datasegmentacionxlsx","title":"Definici\u00f3n desde el archivo <code>data/segmentacion.xlsx</code>","text":"<p>Este camino se recomienda si la apertura tiene una l\u00f3gica compleja o depende de otras aperturas. Para ello, se deben seguir los siguientes pasos:</p> <ol> <li> <p>Crear una nueva hoja en el Excel. El nombre de la hoja debe seguir el siguiente formato: <code>add_{indicador_cantidad}_{alias_apertura}</code>.</p> <p><code>indicador_cantidad</code> admite tres posibles valores: <code>s</code> para siniestros, <code>p</code> para primas, y <code>e</code> para expuestos. Por ejemplo, si los siniestros se van a aperturar por amparo, el nombre de la hoja ser\u00eda <code>add_s_Amparos</code>. Si tanto siniestros como primas y expuestos se van a aperturar por esta variable, el nombre ser\u00eda <code>add_spe_Amparos</code>.</p> </li> <li> <p>Crear la tabla con la definicion de la apertura. A continuacion, se muestra un ejemplo:</p> <p></p> <p>Las columnas grises de la imagen corresponden a las columnas como aparecen en Teradata, mientras que la columna azul oscura representa la definici\u00f3n de la apertura creada por el usuario.</p> </li> <li> <p>Al principio del query, crear una tabla vol\u00e1til para recibir la tabla creada anteriormente. Siguiendo el mismo ejemplo:</p> <pre><code>CREATE MULTISET VOLATILE TABLE canal_poliza\n(\n    compania_id SMALLINT NOT NULL\n    , codigo_op VARCHAR(100) NOT NULL\n    , ramo_id INTEGER NOT NULL\n    , codigo_ramo_op VARCHAR(100) NOT NULL\n    , poliza_id BIGINT NOT NULL\n    , numero_poliza VARCHAR(100) NOT NULL\n    , apertura_canal_desc VARCHAR(100) NOT NULL\n) PRIMARY INDEX (\n    poliza_id, codigo_ramo_op, compania_id\n) ON COMMIT PRESERVE ROWS;\nINSERT INTO CANAL_POLIZA VALUES (?, ?, ?, ?, ?, ?, ?);\nCOLLECT STATISTICS ON canal_poliza INDEX (poliza_id, codigo_ramo_op, compania_id);\n</code></pre> <p>Es importante, cuando cree este tipo de tablas, recolectar estad\u00edsticas (<code>COLLECT STATISTICS...</code>), de forma que la tabla pueda ser estudiada por el motor interno de Teradata y el query pueda ser optimizado.</p> </li> <li> <p>Utilizar la tabla en las consultas para definir la apertura.</p> <pre><code>SELECT\n    ...\n    , COALESCE(p.apertura_canal_desc, 'RESTO') AS apertura_canal_desc\n    ...\n\nFROM mdb_seguros_colombia.v_hist_polcert_cobertura AS vpc\n...\nLEFT JOIN\n    canal_poliza AS p\n    ON\n        vpc.poliza_id = p.poliza_id\n        AND ramo.codigo_ramo_op = p.codigo_ramo_op\n        AND cia.compania_id = p.compania_id\n\nWHERE ...\nGROUP BY ...\n</code></pre> </li> </ol>"},{"location":"config/cuadre_contable/","title":"Cuadre contable","text":"<p>Para los an\u00e1lisis de siniestralidad, las cifras utilizadas de pagos, aviso, y producci\u00f3n emitida y devengada deben ser consistentes con las cifras reportadas en los estados financieros. El umbral m\u00e1ximo de diferencias aceptadas corresponde al 5% de la cifra contable, pero est\u00e1 sujeto a variaciones dependiendo de las caracter\u00edsticas de cada negocio.</p> <p>Asimismo, cada negocio puede decidir adoptar una estrategia de repartici\u00f3n de diferencias contables, de forma que la cifra usada en el an\u00e1lisis sea exactamente la contable. Esta estrategia consiste en repartir la diferencia en una o varias de las aperturas definidas, las cuales se especifican en las hojas \"Cuadre_Siniestros\" y \"Cuadre_Primas\" del archivo <code>data/segmentacion.xlsx</code>.</p> <p>Todos los an\u00e1lisis de consistencia de informaci\u00f3n se almacenan en dos carpetas: <code>data/controles_informacion/pre_cuadre_contable</code> (la informaci\u00f3n tal cual sale de Teradata) y <code>data/controles_informacion/post_cuadre_contable</code> (la informaci\u00f3n con las diferencias repartidas y la cifra contable conciliada). Si el negocio no realiza un cuadre contable, la segunda carpeta quedar\u00e1 vac\u00eda.</p>"},{"location":"config/fuentes/","title":"Fuentes de informaci\u00f3n y permisos necesarios","text":"Informaci\u00f3n Negocio Origen \u00bfRequiere permiso? Siniestros hist\u00f3ricos Todos Teradata S\u00ed Movimientos de pagos y aviso Todos Teradata S\u00ed Primas por periodo de exposici\u00f3n Todos Teradata S\u00ed Expuestos por periodo de exposici\u00f3n Todos Teradata S\u00ed Fechas de ocurrencia de pensiones ARL Teradata S\u00ed Retroactivo de pensiones ARL Di\u00f3genes S\u00ed Primera reserva matem\u00e1tica de pensiones ARL Osiris S\u00ed Estados financieros Todos SAP S\u00ed"},{"location":"config/fuentes/#observaciones","title":"Observaciones","text":"<ol> <li> <p>Para realizar los procesos de extracci\u00f3n de informaci\u00f3n es necesario estar siempre conectado a la VPN.</p> </li> <li> <p>Para extraer la informaci\u00f3n se debe tener acceso a las siguientes bases de datos:</p> <ul> <li>MDB_SEGUROS_COLOMBIA: Pagos y reservas de Movilidad, Vida, Salud, Empresariales.</li> <li>MDB_ARP_COLOMBIA: Pagos y reservas de ARL.</li> <li>MDB_SALUD_COLOMBIA: Pagos y reservas de Salud.</li> </ul> </li> </ol>"},{"location":"config/queries/","title":"Consultas o queries","text":"<p>Para realizar un an\u00e1lisis de tri\u00e1ngulos o entrem\u00e9s y calcular una siniestralidad \u00faltima, necesitamos contar con informaci\u00f3n de siniestros, primas, y expuestos. La principal forma de obtener esta informaci\u00f3n es a trav\u00e9s de consultas de Teradata, las cuales ser\u00e1n almacenadas en la carpeta <code>data/queries</code>.</p> <p>Los queries contenidos por defecto en esta carpeta son los que utiliza actualmente cada negocio para su proceso mensual de cierre de reservas, pero se pueden modificar libremente en caso de que se quiera realizar un an\u00e1lisis diferente.</p> <p>A continuaci\u00f3n, se presenta una descripci\u00f3n general de la l\u00f3gica de funcionamiento de cada consulta, as\u00ed como la estructura m\u00ednima que cada una debe contener. Sin embargo, pueden existir particularidades en el entendimiento de cada negocio que modifiquen la l\u00f3gica de sus consultas.</p>"},{"location":"config/queries/#siniestros","title":"Siniestros","text":"<p>Esta consulta recupera la informaci\u00f3n de los siniestros pagados y avisados (retenidos y brutos) por cada agrupaci\u00f3n de reservas (seg\u00fan corresponda en cada negocio) con su respectiva fecha de siniestro y fecha de registro, as\u00ed como el conteo incurrido, bruto y desistido.</p> <p>Existen diferentes modelos de datos para las \u00e1reas de Seguros, ARL y EPS, as\u00ed como un modelo de datos particular para la p\u00f3liza de salud. En las tablas de Seguros, los insumos principales son las vistas MDB_SEGUROS_COLOMBIA.V_EVENTO_SINIESTRO_COBERTURA (para informaci\u00f3n bruta) y MDB_SEGUROS_COLOMBIA.V_EVENTO_REASEGURO_SINI_COB (para informaci\u00f3n cedida), las cuales traen un registro para cada movimiento que se hace por siniestro, sea de pago o de reserva de aviso.</p> <p>El conteo de siniestros se realiza considerando la primera fecha de movimiento, sea de pago o de aviso. En ese orden de ideas, para el conteo de pagos se utiliza la primera fecha de pago, mientras que para el conteo incurrido se utiliza la fecha m\u00ednima entre el primer pago y el primer movimiento de aviso. Para el caso del conteo de desistidos, se consideran los siniestros que tuvieron reserva de aviso en alg\u00fan momento del tiempo, pero para los cuales nunca se realiz\u00f3 un pago. La fecha de desistimiento se considera como la fecha en la que se libera completamente la reserva de aviso. Cabe destacar que el conteo de siniestros es el mismo para el bruto y el retenido.</p>"},{"location":"config/queries/#estructura-siniestros","title":"Estructura siniestros","text":"Nombre de la columna Descripci\u00f3n codigo_op C\u00f3digo de la compa\u00f1\u00eda (01 para Generales, 02 para Vida). codigo_ramo_op C\u00f3digo del ramo. \"columnas de aperturas\" Por ejemplo: apertura_canal, apertura_amparo, tipo_vehiculo, etc. atipico Binaria: 1 si es un siniestro at\u00edpico, 0 si es t\u00edpico. fecha_siniestro Fecha de ocurrencia del siniestro. fecha_registro Fecha de movimiento (pago o aviso). conteo_pago Conteo de siniestros pagados. conteo_incurrido Conteo de siniestros incurridos. conteo_desistido Conteo de siniestros desistidos. pago_bruto Valor del pago bruto. pago_retenido Valor del pago retenido. aviso_bruto Valor del aviso bruto (movimiento, no saldo). aviso_retenido Valor del aviso retenido (movimiento, no saldo.)"},{"location":"config/queries/#primas","title":"Primas","text":"<p>Esta consulta recupera la informaci\u00f3n de la producci\u00f3n de la compa\u00f1\u00eda. Esto es las primas tanto brutas como retenidas (emitidas y devengadas) por cada agrupaci\u00f3n de reservas (seg\u00fan corresponda en cada negocio) con su respectiva fecha de registro. En el modelo de datos de Seguros, el insumo principal es la vista MDB_SEGUROS_COLOMBIA.V_RT_DETALLE_COBERTURA, la cual trae la informaci\u00f3n de todos los rubros del PyG que conforman el resultado t\u00e9cnico, desglosado a nivel de p\u00f3liza certificado y amparo.</p>"},{"location":"config/queries/#estructura-primas","title":"Estructura primas","text":"Nombre de la columna Descripci\u00f3n codigo_op C\u00f3digo de la compa\u00f1\u00eda (01 para Generales, 02 para Vida). codigo_ramo_op C\u00f3digo del ramo. \"columnas de aperturas\" Pueden diferir de las columnas de aperturas de siniestros y expuestos. fecha_registro Fecha de movimiento. prima_bruta Valor de la prima bruta. prima_retenida Valor de la prima retenida. prima_bruta_devengada Valor de la prima bruta devengada. prima_retenida_devengada Valor de la prima retenida devengada."},{"location":"config/queries/#expuestos","title":"Expuestos","text":"<p>Esta consulta recupera la informaci\u00f3n de los expuestos y vigentes por cada agrupaci\u00f3n de reservas, seg\u00fan corresponda en cada negocio. Para ello, parte de una tabla de meses con d\u00edas iniciales y d\u00edas finales, y de una tabla con la informaci\u00f3n de las p\u00f3lizas y amparos suscritos en el rango temporal deseado, con sus fechas de inicio y fin de vigencia. Estas dos tablas se comparan a trav\u00e9s de un CROSS JOIN simplificado a trav\u00e9s de un INNER JOIN, para encontrar la exposici\u00f3n de cada p\u00f3liza-amparo en cada uno de los meses necesarios. Finalmente, la informaci\u00f3n se agrupa a nivel de apertura de reservas, para hallar la suma total de expuestos y vigentes en cada mes de la ventana temporal.</p> <p>En el modelo de datos de Seguros, los insumos principales son las vistas MDB_SEGUROS_COLOMBIA.V_HIST_POLCERT_COBERTURA (si se necesita a nivel de amparo) y MDB_SEGUROS_COLOMBIA.V_POLIZA_CERTIFICADO (si no se necesita a nivel de amparo).</p>"},{"location":"config/queries/#estructura-expuestos","title":"Estructura expuestos","text":"Nombre de la columna Descripci\u00f3n codigo_op C\u00f3digo de la compa\u00f1\u00eda (01 para Generales, 02 para Vida). codigo_ramo_op C\u00f3digo del ramo. \"columnas de aperturas\" Pueden diferir de las columnas de aperturas de siniestros y primas. fecha_registro Fecha de exposici\u00f3n. expuestos N\u00famero de expuestos del periodo. vigentes N\u00famero de vigentes del periodo."},{"location":"config/sap/","title":"Actualizaci\u00f3n de estados financieros (SAP)","text":"<p>La informaci\u00f3n de los estados financieros se encuentra en <code>data/afo</code>, contenida en 3 archivos de Excel con conexi\u00f3n directa a SAP a trav\u00e9s del complemento Analysis for Office (AFO). Cada archivo de Excel corresponde a una compa\u00f1\u00eda: Generales, Vida, o EPS.</p> <p>Para actualizar el archivo, ir a la pesta\u00f1a \u201cAnalysis\u201d de Excel y dar click en \u201cActualizar todo\u201d. Ingresar las credenciales y darle click en \u201cOk\u201d.</p> <p></p>"},{"location":"particularidades/soat/","title":"Particularides en el proceso de SOAT","text":""},{"location":"particularidades/soat/#extraccion-de-informacion","title":"Extracci\u00f3n de informaci\u00f3n","text":""},{"location":"particularidades/soat/#expuestos-desde-vsoat_poliza","title":"Expuestos desde VSOAT_POLIZA","text":"<p>En la compa\u00f1\u00eda, se cuenta con varios atributos en Teradata que permiten identificar y relacionar los contratos de seguros con sus caracter\u00edsticas acordadas. Estos atributos se almacenan en diferentes tablas o vistas.</p> <p>En el caso espec\u00edfico del SOAT, anteriormente, la exposici\u00f3n se calculaba utilizando los datos de la tabla V_POLIZA_CERTIFICADO_ETL, que contiene informaci\u00f3n sobre los certificados. Se ha identificado que la tabla VSOAT_POLIZA incluye p\u00f3lizas cuyos certificados no est\u00e1n en la tabla V_POLIZA_CERTIFICADO_ETL. Por consiguiente, calcular la exposici\u00f3n exclusivamente desde esta \u00faltima tabla podr\u00eda resultar en una subestimaci\u00f3n de esta.</p> <p>Dado que la tabla VSOAT_POLIZA tambi\u00e9n proporciona las fechas necesarias para estimar la exposici\u00f3n de manera m\u00e1s precisa, se ha decidido adoptar VSOAT_POLIZA como la fuente de datos principal para los c\u00e1lculos de exposici\u00f3n de SOAT, garantizando as\u00ed la integridad y consistencia de los datos utilizados.</p>"},{"location":"particularidades/soat/#prima-calculada-manual","title":"Prima calculada manual","text":"<p>La prima devengada manual sin descuento o prima calculada manual es un concepto introducido para mantener la consistencia en los c\u00e1lculos actuariales basados en la siniestralidad, sin verse afectados por los cambios en las primas de los c\u00f3digos con tarifas diferenciales establecidos por el DECRETO 2497 DE 2022.</p> <p>Para su c\u00e1lculo, se parte de la prima emitida, asumiendo que todas las p\u00f3lizas se expiden el d\u00eda 16 de cada mes. En consecuencia, se devenga 1/24 de la prima tanto el mes de expedici\u00f3n como un a\u00f1o despu\u00e9s, y 1/12 de la prima en los 11 meses intermedios. En Teradata, se crean tablas auxiliares para realizar este c\u00e1lculo. Una tabla se combina con una versi\u00f3n auxiliar de s\u00ed misma, aplicando la l\u00f3gica previamente descrita. A los meses fuera de este rango de fechas se les asigna un valor de 0.</p> <p>Hasta este punto, se obtiene la prima devengada. Por su parte, para eliminar el efecto del descuento, se introduce un factor que reconoce la tarifa de los riesgos en ausencia de cambios, el cual var\u00eda anualmente y difiere entre veh\u00edculos con tarifa diferencial y el resto de los veh\u00edculos.</p>"},{"location":"particularidades/soat/#umbral-aceptado-diferencias-historicas","title":"Umbral aceptado diferencias hist\u00f3ricas","text":"<p>En definici\u00f3n.</p>"},{"location":"particularidades/soat/#cuadre-contable","title":"Cuadre contable","text":"<p>El ajuste se realiza en la apertura de \u201cMOTOS \u2013 DIGITAL\u201d debido a que es la apertura de mayor participaci\u00f3n en la siniestralidad del ramo. Anualmente, el equipo de Gesti\u00f3n T\u00e9cnica validar\u00e1 la apertura de mayor participaci\u00f3n y realizar\u00e1 los ajustes pertinentes para que la diferencia sea asignada correctamente.</p> <p>En primas no se hace cuadre sobre la prima devengada, pues como se explic\u00f3 anteriormente, esta se calcula manual desde Teradata, y por lo tanto no deber\u00eda coincidir exactamente con la prima devengada de SAP.</p>"},{"location":"uso/controles/","title":"Controles generados","text":""},{"location":"uso/controles/#comparacion-entre-las-cifras-de-teradata-y-sap","title":"Comparaci\u00f3n entre las cifras de Teradata y SAP","text":"<p>Esta comparaci\u00f3n solamente se realiza para primas y siniestros. Se realiza para cada periodo contable a nivel de ramo, pues esta es la apertura m\u00e1xima que se puede lograr desde SAP.</p> <p></p>"},{"location":"uso/controles/#consistencia-historica","title":"Consistencia hist\u00f3rica","text":"<p>Esta validaci\u00f3n consiste en comparar las cifras de la extracci\u00f3n actual contra la extracci\u00f3n del mes inmediatamente anterior, tanto para Teradata como para SAP. En el caso de Teradata, la comparaci\u00f3n se hace al nivel de segmentaci\u00f3n m\u00e1ximo (apertura + periodo de ocurrencia + periodo de movimiento), de forma que se pueda visualizar variaciones en la cifra total y cambios de ocurrencia o periodo de movimiento entre las diferentes extracciones.</p> <p></p>"},{"location":"uso/controles/#evidencias-de-extraccion","title":"Evidencias de extracci\u00f3n","text":"<p>En la carpeta <code>controles_informacion</code>, se almacena el archivo de segmentaci\u00f3n utilizado con una hoja adicional donde se consigna el n\u00famero de filas resultante de la extracci\u00f3n de cada archivo, as\u00ed como un pantallazo con la fecha y hora de fin del proceso de extracci\u00f3n.</p>"},{"location":"uso/extraccion/","title":"Extracci\u00f3n de informaci\u00f3n","text":"<p>Los archivos generados a partir de los queries quedan almacenados en la carpeta <code>data/raw</code> en dos formatos: <code>.parquet</code> (el que utiliza la aplicaci\u00f3n internamente) y <code>.csv</code> (para que el usuario pueda analizar el contenido, en caso de que se necesite).</p>"},{"location":"uso/funciones_plantilla/","title":"Funciones de la plantilla","text":""},{"location":"uso/funciones_plantilla/#preparar","title":"Preparar","text":"<p>Esta funci\u00f3n cumple las siguientes funciones:</p> <ul> <li>Crea una nueva plantilla con el nombre especificado, si a\u00fan no est\u00e1 creado. De lo contrario, abre la que est\u00e1 actualmente creada y elimina todos los contenidos.</li> <li>Genera la hoja de Resumen con las periodicidades especificadas en la hoja \"Apertura_Siniestros\" del archivo <code>data/segmentacion.xlsx</code>.</li> <li>Genera la hoja de At\u00edpicos.</li> <li>Genera la hoja de Hist\u00f3rico a partir de los archivos almacenados en la carpeta <code>output/resultados</code>.</li> <li>Esconde las hojas no relevantes y muestra las relevantes. Por ejemplo, en un an\u00e1lisis de tri\u00e1ngulos, esconde las hojas de Entrem\u00e9s y Completar_diagonal.</li> </ul>"},{"location":"uso/funciones_plantilla/#funciones-por-apertura","title":"Funciones por apertura","text":"<p>Las siguientes funciones aplican \u00fanicamente para las hojas donde se desarrollan an\u00e1lisis de tri\u00e1ngulos por apertura, es decir:</p> <ul> <li>Frecuencia</li> <li>Severidad</li> <li>Plata</li> <li>Completar_diagonal</li> </ul>"},{"location":"uso/funciones_plantilla/#generar","title":"Generar","text":"<p>Esta funci\u00f3n genera toda la estructura necesaria para el an\u00e1lisis de tri\u00e1ngulos en la plantilla seleccionada, para la apertura y el atributo seleccionados.</p>"},{"location":"uso/funciones_plantilla/#guardar","title":"Guardar","text":"<p>Esta funci\u00f3n almacena todos los par\u00e1metros ingresados en la plantilla seleccionada, para la apertura y el atributo seleccionados. Estos par\u00e1metros son:</p> <ul> <li>Tri\u00e1ngulos de exclusiones.</li> <li>Ventanas de factores de desarrollo.</li> <li>Tipo de factores seleccionados (promedio/mediana/promedio ponderado ventana/etc).</li> <li>Vector de factores seleccionados.</li> </ul> <p>Adicionalmente, en el caso de las plantillas de tri\u00e1ngulos (Frecuencia, Severidad, y Plata) se guardan tambi\u00e9n las siguientes cantidades:</p> <ul> <li>Metodolog\u00eda (pago o incurrido).</li> <li>Vector de ultimate (como f\u00f3rmulas y valores).</li> <li>Metodolog\u00eda por ocurrencia (chain-ladder, bornhuetter-ferguson, indicador).</li> <li>Tri\u00e1ngulo de factores de desarrollo completo (por si se decide modificar los factores de una o varias ocurrencias).</li> <li>Vector de indicador (s\u00f3lo es relevante para metodolog\u00edas de bornhuetter-ferguson e indicador).</li> <li>Columna de comentarios.</li> </ul> <p>Estas cantidades se almacenan en la carpeta <code>data/db</code> como una serie de archivos <code>.parquet</code>.</p>"},{"location":"uso/funciones_plantilla/#traer","title":"Traer","text":"<p>Esta funci\u00f3n recupera los par\u00e1metros almacenados para la apertura y el atributo seleccionados en la plantilla seleccionada, leyendo los datos de la carpeta <code>data/db</code>. Se puede entender como el inverso del modo \"Guardar\".</p>"},{"location":"uso/funciones_plantilla/#guardar-todo","title":"Guardar todo","text":"<p>Esta funci\u00f3n itera sobre todas las aperturas y atributos ejecutando el modo \"Guardar\".</p>"},{"location":"uso/funciones_plantilla/#traer-y-guardar-todo","title":"Traer y guardar todo","text":"<p>Esta funci\u00f3n itera sobre todas las aperturas y atributos ejecutando el modo \"Traer\" y, posteriormente, el modo \"Guardar\". Es \u00fatil para situaciones donde se da un cambio en la informaci\u00f3n pero no en el criterio actuarial seleccionado, y se requiere actualizar r\u00e1pidamente las cifras siguiendo el mismo criterio.</p>"},{"location":"uso/funciones_plantilla/#almacenar-analisis","title":"Almacenar an\u00e1lisis","text":"<p>Esta funci\u00f3n concatena la tabla de la hoja Resumen con la tabla de la hoja At\u00edpicos y almacena el resultado en la carpeta <code>output/resultados</code>. Este archivo contiene la estimaci\u00f3n de siniestralidad \u00faltima desarrollada en la plantilla correspondiente.</p>"},{"location":"uso/informes/","title":"Generaci\u00f3n de informes","text":"<p>El bot\u00f3n \"Generar informe Actuario Responsable\" almacena este informe en la carpeta <code>output/resultados</code>.</p>"},{"location":"uso/inicio/","title":"Iniciar la aplicaci\u00f3n","text":"<p>Escriba la siguiente l\u00ednea en la terminal y presione enter:</p> <pre><code>uv run run.py\n</code></pre> <p>El comando anterior iniciar\u00e1 la aplicaci\u00f3n en el localhost. Utilice el navegador para dirigirse a esa ruta.</p>"},{"location":"uso/inicio/#estructura-del-frontend","title":"Estructura del frontend","text":""},{"location":"uso/inicio/#estado","title":"Estado","text":"<p>En esta secci\u00f3n se le informar\u00e1 sobre el progreso de las operaciones que ejecute en la aplicaci\u00f3n, as\u00ed como de posibles errores que se generen y de notificaciones de inter\u00e9s.</p>"},{"location":"uso/inicio/#parametros","title":"Par\u00e1metros","text":"<p>En esta secci\u00f3n ingresar\u00e1 los par\u00e1metros con los que se ejecutar\u00e1 el an\u00e1lisis.</p>"},{"location":"uso/inicio/#extraccion-de-informacion","title":"Extracci\u00f3n de informaci\u00f3n","text":"<p>En esta secci\u00f3n se encuentran los botones para ejecutar los queries de siniestros, primas, y expuestos; de acuerdo a la configuraci\u00f3n que especific\u00f3 en el archivo <code>data/segmentacion.xlsx</code>. Si presiona los tres botones uno tras del otro, los queries se ejecutar\u00e1n en paralelo.</p>"},{"location":"uso/inicio/#controles-de-informacion","title":"Controles de informaci\u00f3n","text":"<p>Este bot\u00f3n generar\u00e1 los archivos con los controles de informaci\u00f3n, las evidencias respectivas, y le informar\u00e1 (en la ventana de Estado) sobre las diferencias m\u00e1s significativas en primas y siniestros.</p>"},{"location":"uso/inicio/#plantilla","title":"Plantilla","text":"<p>En esta secci\u00f3n se encuentran los comandos para interactuar con las plantillas de Excel donde se desarrolla el an\u00e1lisis de la siniestralidad \u00faltima.</p>"},{"location":"uso/inicio/#resultados","title":"Resultados","text":"<p>Los botones de esta secci\u00f3n permiten consolidar los resultados del an\u00e1lisis realizado en las plantillas y generar los informes releventas (ejemplo: Actuario Responsable).</p>"},{"location":"uso/parametros/","title":"Ingreso de par\u00e1metros","text":"<ul> <li>Negocio: Permite identificar cu\u00e1l archivo de segmentaci\u00f3n y cu\u00e1les queries utilizar.</li> <li>Mes de la primera ocurrencia: Determina el mes que corresponde a la primera fila de los tri\u00e1ngulos. Los meses anteriores se agrupar\u00e1n en esta primera fila, de modo que los movimientos de estos meses tambi\u00e9n quedan recogidos aqu\u00ed, facilitando la comparaci\u00f3n contra SAP.</li> <li>Mes de corte: Mes de corte de la informaci\u00f3n.</li> <li>Tipo de an\u00e1lisis: Puede ser tri\u00e1ngulos o entrem\u00e9s.</li> <li>Aproximar reaseguro: Solamente aplica para el negocio de autonom\u00eda, el cual tiene una estrategia de aproximaci\u00f3n de reaseguro dada la indisponibilidad de esta informaci\u00f3n al momento del cierre. El resto de negocios deben dejar este par\u00e1metro en \"No\".</li> <li>Cuadrar siniestros contra SAP: Define si se reasignar\u00e1n las diferencias entre SAP y Teradata para los siniestros, de modo que las cifras de pago bruto, pago retenido, aviso bruto y aviso retenido sean exactamente las contables. La reasignaci\u00f3n se har\u00e1 en funci\u00f3n de las aperturas definidas en el archivo <code>data/segmentacion.xlsx</code>, as\u00ed que se generar\u00e1 un error si no hizo previamente esta definici\u00f3n.</li> <li>A\u00f1adir fraude a siniestros: Solamente aplica para el negocio de SOAT, el resto de negocios deben dejar este par\u00e1metro en \"No\".</li> <li>Cuadrar primas contra SAP: Mismo concepto que el cuadre de siniestros, pero en este caso, para las primas brutas y retenidas, tanto emitidas como devengadas. Requiere tambi\u00e9n configuraci\u00f3n en <code>data/segmentacion.xlsx</code>.</li> <li>Nombre de la plantilla: Nombre con el que se guardar\u00e1 la plantilla del an\u00e1lisis. Tenga en cuenta que dentro de un mismo proyecto puede usar varias plantillas, de modo que este par\u00e1metro debe llevar el nombre de la que quiere crear (o abrir, si ya est\u00e1 creada) para hacer la estimaci\u00f3n. Todas las plantillas quedan guardadas en la carpeta <code>plantillas</code>.</li> </ul>"},{"location":"uso/plantilla/","title":"Descripci\u00f3n de la plantilla","text":""},{"location":"uso/plantilla/#hojas-comunes","title":"Hojas comunes","text":"<ul> <li> <p>Resumen: Contiene el total de las cifras de siniestros, primas, y expuestos por apertura y ocurrencia. Adem\u00e1s, es donde se almacenan los resultados de siniestralidad \u00faltima, frecuencia \u00faltima, y severidad \u00faltima. Contiene \u00fanicamente informaci\u00f3n de siniestros t\u00edpicos.</p> </li> <li> <p>At\u00edpicos: Es el hom\u00f3logo a la hoja resumen, pero contiene \u00fanicamente informaci\u00f3n de siniestros at\u00edpicos.</p> </li> <li> <p>Hist\u00f3rico: Tiene la misma estructura que la hoja resumen, con la diferencia de que contiene toda la informaci\u00f3n de cierres anteriores (le\u00edda desde la carpeta <code>output/resultados</code>). Adicionalmente, presenta tambi\u00e9n una columna que indica el mes del cierre correspondiente (mes_corte) y el tipo de an\u00e1lisis (si fue tri\u00e1ngulos o entrem\u00e9s). Contiene informaci\u00f3n de siniestros t\u00edpicos y at\u00edpicos.</p> </li> </ul>"},{"location":"uso/plantilla/#hojas-para-analisis-de-triangulos","title":"Hojas para an\u00e1lisis de tri\u00e1ngulos","text":"<ul> <li> <p>Indexaciones: Esta hoja se utiliza para definir vectores de indexaci\u00f3n para la severidad, en caso de que se vaya a utilizar las metodolog\u00edas de indexaci\u00f3n por fecha de ocurrencia o por fecha pago. De lo contrario, se puede dejar vac\u00eda.</p> </li> <li> <p>Frecuencia: Permite hacer an\u00e1lisis de tri\u00e1ngulos de frecuencia, sea por pago o por incurrido.</p> </li> <li> <p>Severidad: Permite hacer an\u00e1lisis de tri\u00e1ngulos de severidad, sea por pago o por incurrido, y opcionalmente por una metodolog\u00eda de indexaci\u00f3n por fecha de ocurrencia o fecha de pago.</p> </li> <li> <p>Plata: Permite hacer an\u00e1lisis de tri\u00e1ngulos de plata, sea por pago o por incurrido.</p> </li> </ul>"},{"location":"uso/plantilla/#hojas-para-analisis-de-entremes","title":"Hojas para an\u00e1lisis de entrem\u00e9s","text":"<ul> <li> <p>Entrem\u00e9s: Tiene la misma estructura de la hoja Resumen, pero cuenta con columnas adicionales para estimar las diferentes metodolog\u00edas del entrem\u00e9s.</p> </li> <li> <p>Completar diagonal: Permite hacer an\u00e1lisis de tri\u00e1ngulos para estimar la completitud de la diagonal y actualizar la siniestralidad \u00faltima en funci\u00f3n de c\u00f3mo se viene desarrollando el entrem\u00e9s.</p> </li> </ul>"},{"location":"uso/resultados/","title":"Consolidaci\u00f3n de resultados","text":"<p>El bot\u00f3n \"Actualizar y abrir archivo de resultados\" concatena todos los archivos presentes en la carpeta <code>output/resultados</code> y los pega en la hoja \"Resultados\" del archivo <code>output/resultados.xlsx</code>. Si este archivo no est\u00e1 creado, lo crea autom\u00e1ticamente. Si est\u00e1 creado, solamente se sobrescribe la hoja \"Resultados\", el resto de hojas (en caso de existir) no se modificar\u00e1n.</p> <p>Si en la carpeta <code>output/resultados</code> hay dos archivos que tienen resultados de la misma apertura, en el archivo <code>output/resultados.xlsx</code> solamente quedar\u00e1 la estimaci\u00f3n m\u00e1s reciente de esta apertura, la otra ser\u00e1 ignorada.</p>"}]}