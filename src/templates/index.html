<!doctype html>
<html lang="en">
  <head>
    <title>Plantilla Seguimiento Reservas</title>
    <link rel="stylesheet" href="{{ url_for('static', path='styles.css') }}" />
  </head>

  <body>
    <nav>
      <h1>Plantilla Seguimiento Reservas</h1>
      <img src="static/logo_sura.png" alt="Logo-SURA" width="200" height="74" />
    </nav>

    <div class="form-section">
      <a
        href="https://sebastobone.github.io/app-analisis-siniestralidad/"
        target="_blank"
        >Documentaci√≥n</a
      >
    </div>

    <div class="form-section">
      <h2>Estado</h2>
      <div id="log"></div>
    </div>

    <div class="form-section">
      <h2>Parametros</h2>
      <form id="parametrosForm">
        <label for="negocio">Negocio:</label>
        <select id="negocio" name="negocio">
          <option value="arl">ARL</option>
          <option value="autonomia">Autonomia</option>
          <option value="empresariales">Empresariales</option>
          <option value="movilidad">Movilidad</option>
          <option value="salud">Salud</option>
          <option value="soat">SOAT</option>
          <option value="demo">Demo</option>
          <option value="custom">Custom</option>
        </select>

        <label for="mes_inicio">Mes de la primera ocurrencia:</label>
        <input
          type="text"
          id="mes_inicio"
          name="mes_inicio"
          placeholder="AAAAMM"
          required
        />

        <label for="mes_corte">Mes de corte:</label>
        <input
          type="text"
          id="mes_corte"
          name="mes_corte"
          placeholder="AAAAMM"
          required
        />

        <label for="tipo_analisis">Tipo de analisis:</label>
        <select id="tipo_analisis" name="tipo_analisis">
          <option value="triangulos">Triangulos</option>
          <option value="entremes">Entremes</option>
        </select>

        <label for="nombre_plantilla">Nombre de la plantilla:</label>
        <input
          type="text"
          id="nombre_plantilla"
          name="nombre_plantilla"
          placeholder="Plantilla_Reservas"
          required
        />
      </form>

      <div class="input-group">
        <label for="archivoSegmentacion" class="custom-file-upload"
          >Cargar archivo de segmentacion:</label
        >
        <input
          type="file"
          id="archivoSegmentacion"
          name="archivoSegmentacion"
          accept=".xlsx"
        />

        <button
          style="background-color: gray"
          id="descargarEjemploSegmentacion"
        >
          Descargar ejemplo
        </button>
      </div>

      <button id="guardarParametros">Guardar parametros</button>
      <button id="traerParametros">Traer parametros</button>
    </div>

    <div class="form-section" id="extraccion" style="display: none">
      <h2>Extraccion de informacion</h2>

      <div class="input-group">
        <label for="querySiniestros" class="custom-file-upload"
          >Cargar query de siniestros:</label
        >
        <input
          type="file"
          id="querySiniestros"
          name="querySiniestros"
          accept=".sql"
        />
      </div>

      <div class="input-group">
        <label for="queryPrimas" class="custom-file-upload"
          >Cargar query de primas:</label
        >
        <input type="file" id="queryPrimas" name="queryPrimas" accept=".sql" />
      </div>

      <div class="input-group">
        <label for="queryExpuestos" class="custom-file-upload"
          >Cargar query de expuestos:</label
        >
        <input
          type="file"
          id="queryExpuestos"
          name="queryExpuestos"
          accept=".sql"
        />
      </div>

      <form id="credencialesTeradata">
        <label for="user">Usuario Teradata:</label>
        <input type="text" id="user" name="user" required />

        <label for="password">Contrasena Teradata:</label>
        <input type="password" id="password" name="password" required />
      </form>

      <button
        class="extraccion"
        endpoint="correr-query-siniestros"
        cantidad="siniestros"
      >
        Correr query siniestros
      </button>
      <button
        class="extraccion"
        endpoint="correr-query-primas"
        cantidad="primas"
      >
        Correr query primas
      </button>
      <button
        class="extraccion"
        endpoint="correr-query-expuestos"
        cantidad="expuestos"
      >
        Correr query expuestos
      </button>
    </div>

    <div class="form-section" id="cargaManual" style="display: none">
      <h2>Carga manual de informacion</h2>

      <button id="descargarEjemplosCantidades">Descargar ejemplos</button>

      <div class="input-group">
        <label for="archivosSiniestros" class="custom-file-upload"
          >Cargar archivos de siniestros:</label
        >
        <input
          type="file"
          id="archivosSiniestros"
          name="archivosSiniestros"
          accept=".csv, .parquet, .xlsx, .txt"
          multiple
        />
      </div>

      <div class="input-group">
        <label for="archivosPrimas" class="custom-file-upload"
          >Cargar archivos de primas:</label
        >
        <input
          type="file"
          id="archivosPrimas"
          name="archivosPrimas"
          accept=".csv, .parquet, .xlsx, .txt"
          multiple
        />
      </div>

      <div class="input-group">
        <label for="archivosExpuestos" class="custom-file-upload"
          >Cargar archivos de expuestos:</label
        >
        <input
          type="file"
          id="archivosExpuestos"
          name="archivosExpuestos"
          accept=".csv, .parquet, .xlsx, .txt"
          multiple
        />
      </div>

      <button id="cargarArchivos" endpoint="cargar-archivos">
        Cargar archivos
      </button>

      <button
        id="eliminarArchivosCargados"
        style="background-color: darkred"
        endpoint="eliminar-archivos-cargados"
      >
        Eliminar archivos cargados
      </button>
    </div>

    <div class="form-section" id="controles" style="display: none">
      <h2>Controles y cuadre de informacion</h2>

      <label class="checkbox-group">
        <input type="checkbox" id="cuadrarSiniestros" />
        <span class="checkbox-custom"></span>
        Realizar cuadre de siniestros
      </label>

      <label class="checkbox-group">
        <input type="checkbox" id="cuadrarPrimas" />
        <span class="checkbox-custom"></span>
        Realizar cuadre de primas
      </label>

      <div id="cargarAfos"></div>

      <a
        href="https://suramericana-my.sharepoint.com/:f:/g/personal/sebastiantobon_sura_com_co/ErrqzjH-aIRMsAgGij4ptPABWbknTTpJMxfBjFJPU6YIWQ?e=1dPTF6"
        target="_blank"
        >AFOs de referencia</a
      >

      <h3>Archivos para incluir en controles y cuadre de siniestros:</h3>
      <div id="candidatos_siniestros"></div>

      <h3>Archivos para incluir en controles y cuadre de primas:</h3>
      <div id="candidatos_primas"></div>

      <h3>Archivos para incluir en controles de expuestos:</h3>
      <div id="candidatos_expuestos"></div>

      <button id="generarControles" endpoint="generar-controles">
        Generar controles y cuadre
      </button>
    </div>

    <div class="form-section" id="referenciasEntremes" style="display: none">
      <h2>Referencias para entremes</h2>

      <form id="referenciasEntremesForm">
        <label for="referencia_actuarial"
          >Referencia para ultimate actuarial:</label
        >
        <select id="referencia_actuarial" name="referencia_actuarial">
          <option value="entremes">Entremes</option>
        </select>

        <label for="referencia_contable"
          >Referencia para ultimate contable:</label
        >
        <select id="referencia_contable" name="referencia_contable">
          <option value="entremes">Entremes</option>
        </select>
      </form>
    </div>

    <div class="form-section" id="seccionPlantilla" style="display: none">
      <h2>Plantilla</h2>
      <button class="apiButton" endpoint="abrir-plantilla">
        Abrir plantilla
      </button>
      <button id="prepararPlantilla">Preparar plantilla</button>

      <form id="modosPlantilla">
        <label for="apertura">Apertura:</label>
        <select id="apertura" name="apertura">
          <option value="">Ninguna</option>
        </select>

        <label for="atributo">Atributo:</label>
        <select id="atributo" name="atributo">
          <option value="bruto">Bruto</option>
          <option value="retenido">Retenido</option>
        </select>

        <label for="plantilla">Plantilla:</label>
        <select id="plantilla" name="plantilla">
          <option value="">Ninguna</option>
        </select>
      </form>

      <button class="modo" endpoint="generar-plantilla">Generar</button>
      <button class="modo" endpoint="actualizar-plantilla">Actualizar</button>
      <button
        class="modo"
        style="background-color: gray"
        endpoint="guardar-apertura"
      >
        Guardar
      </button>
      <button
        class="modo"
        style="background-color: darkkhaki"
        endpoint="traer-apertura"
      >
        Traer
      </button>

      <div id="botonesEntremes" style="display: none">
        <h3>Botones para hoja entremes</h3>

        <button
          class="apiButton"
          style="background-color: gray"
          endpoint="guardar-entremes"
        >
          Guardar formulas entremes
        </button>
        <button id="traerEntremes" style="background-color: darkkhaki">
          Traer formulas entremes
        </button>
      </div>

      <h3>Botones para todas las aperturas</h3>

      <button
        class="modo"
        style="background-color: gray"
        endpoint="guardar-todo"
      >
        Guardar todo
      </button>
      <button id="traerGuardarTodo" style="background-color: darkkhaki">
        Traer y guardar todo
      </button>

      <button
        class="apiButton"
        style="background-color: green"
        endpoint="almacenar-analisis"
      >
        Almacenar analisis
      </button>

      <div id="botonesGraficaFactores" style="display: none">
        <h3>Botones para grafica de factores</h3>

        <button class="modo" endpoint="ajustar-grafica-factores">
          Ajustar limites grafica de factores
        </button>
      </div>
    </div>

    <div class="form-section" id="resultados" style="display: none">
      <h2>Resultados</h2>
      <button class="apiButton" endpoint="actualizar-wb-resultados">
        Actualizar y abrir archivo resultados
      </button>
      <button class="apiButton" endpoint="generar-informe-ar">
        Generar informe Actuario Responsable
      </button>
    </div>

    <script src="static/logViewer.js"></script>
    <script type="module" src="static/ingresarParametros.js"></script>
    <script type="module" src="static/traerParametros.js"></script>
    <script type="module" src="static/extraccion.js"></script>
    <script type="module" src="static/controles.js"></script>
    <script src="static/dropdowns/generarAtributos.js"></script>
    <script type="module" src="static/descargarEjemplos.js"></script>
    <script type="module" src="static/cargaManual.js"></script>
    <script type="module" src="static/modosPlantilla.js"></script>
  </body>
</html>
